(this.webpackJsonpgeosmart_wa=this.webpackJsonpgeosmart_wa||[]).push([[0],{123:function(e,t,a){e.exports=a.p+"static/media/geosmart_logo.b584ec82.jpg"},131:function(e,t,a){e.exports=a.p+"static/media/trofeo.6e8f5de9.jpg"},165:function(e,t,a){e.exports=a.p+"static/media/user.2412c938.png"},246:function(e,t,a){e.exports=a.p+"static/media/Geosmartlogo.a0465ace.png"},247:function(e,t,a){e.exports=a.p+"static/media/BWLogo.fe21ac4b.png"},249:function(e,t,a){e.exports=a.p+"static/media/map.4a0d0ee2.jpg"},250:function(e,t,a){e.exports=a.p+"static/media/flag.7fbbfd24.png"},251:function(e,t,a){e.exports=a.p+"static/media/place.3cbd4b3c.jpg"},255:function(e,t,a){e.exports=a.p+"static/media/learntic.0ce8c98a.png"},275:function(e,t,a){e.exports=a(508)},284:function(e,t,a){},508:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),c=a.n(o),s=a(14),l=a(256),i=a(32),m=a(22),u=a(36),p=a(35),d=(a(284),a(11)),g=a.n(d),h=a(20),f=a(13),b=a.n(f),y=a(123),E=a.n(y),v=a(165),w=a.n(v),k=a(29),x=function(e){return r.a.createElement(k.c,{to:"".concat(e.chatURL),style:{color:"#fff"}},r.a.createElement("li",{className:"contact"},r.a.createElement("div",{className:"wrap"},r.a.createElement("span",{className:"contact-status ".concat(e.status)}),r.a.createElement("img",{src:e.picURL,alt:""}),r.a.createElement("div",{className:"meta"},r.a.createElement("p",{className:"name"},e.name)))))},C="http://".concat("3.92.114.227",":").concat("80","/").concat("graphql"),_=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={chats:[]},e.getUserChats=Object(h.a)(g.a.mark((function t(){var a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e.props.user.username),t.prev=1,t.next=4,b.a.post(C,{query:'\n            query{\n                getChatsByUsername(\n                  username: "'.concat(e.props.user.username,'"\n                ) {\n                  id\n                  participantes\n                  messages\n                }\n              }\n          ')});case 4:a=t.sent,e.setState({chats:a.data.data.getChatsByUsername}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])}))),e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getUserChats()}},{key:"render",value:function(){var e=this.state.chats.map((function(e){return r.a.createElement(x,{key:e.id,name:e.id,picURL:E.a,status:"online",chatURL:"/chat/".concat(e.id)})})),t=this.props.user;return r.a.createElement("div",{id:"sidepanel"},r.a.createElement("div",{id:"profile"},r.a.createElement("div",{className:"wrap"},r.a.createElement("img",{id:"profile-img",src:t.profile_picture,className:"online",alt:""}),r.a.createElement("p",{id:"profile-name"},t.username),r.a.createElement("i",{className:"fa fa-chevron-down expand-button","aria-hidden":"true"}),r.a.createElement("div",{id:"status-options"},r.a.createElement("ul",null,r.a.createElement("li",{id:"status-online",className:"active"},r.a.createElement("span",{className:"status-circle"})," ",r.a.createElement("p",null,"Online")),r.a.createElement("li",{id:"status-away"},r.a.createElement("span",{className:"status-circle"})," ",r.a.createElement("p",null,"Away")),r.a.createElement("li",{id:"status-busy"},r.a.createElement("span",{className:"status-circle"})," ",r.a.createElement("p",null,"Busy")),r.a.createElement("li",{id:"status-offline"},r.a.createElement("span",{className:"status-circle"})," ",r.a.createElement("p",null,"Offline")))),r.a.createElement("div",{id:"expanded"}))),r.a.createElement("div",{id:"search"},r.a.createElement("label",{htmlFor:""},r.a.createElement("i",{className:"fa fa-search","aria-hidden":"true"})),r.a.createElement("input",{type:"text",placeholder:"Search contacts..."})),r.a.createElement("div",{id:"contacts"},r.a.createElement("ul",null,e)),r.a.createElement("div",{id:"bottom-bar"},r.a.createElement("button",{id:"addcontact"},r.a.createElement("i",{className:"fa fa-user-plus fa-fw","aria-hidden":"true"})," ",r.a.createElement("span",null,"Add chat")),r.a.createElement("button",{id:"settings"},r.a.createElement("i",{className:"fa fa-cog fa-fw","aria-hidden":"true"})," ",r.a.createElement("span",null,"Settings"))))}}]),a}(r.a.Component),j=Object(s.b)((function(e){return{user:e.user}}),{})(_),O=a(257),S=function(){function e(){Object(i.a)(this,e),this.callbacks={},this.socketRef=null}return Object(m.a)(e,null,[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),Object(m.a)(e,[{key:"connect",value:function(e){var t=this,a="ws://18.210.193.21:8000/ws/chat/".concat(e,"/");console.log(a),this.socketRef=new WebSocket(a),this.socketRef.onopen=function(){console.log("websocket open")},this.socketNewMessage(JSON.stringify({command:"buscar_mensajes"})),this.socketRef.onmessage=function(e){t.socketNewMessage(e.data)},this.socketRef.onerror=function(e){console.log(e.message)},this.socketRef.onclose=function(){console.log("websocket is closed"),t.connect()}}},{key:"disconnect",value:function(){this.socketRef.close()}},{key:"socketNewMessage",value:function(e){var t=JSON.parse(e),a=t.command;0!==Object.keys(this.callbacks).length&&("messages_dump"===a&&this.callbacks[a](t.messages),"nuevo_mensaje"===a&&this.callbacks[a](t.message))}},{key:"fetchMessages",value:function(e,t){this.sendMessage({command:"buscar_mensajes",username:e,chatId:t})}},{key:"newChatMessage",value:function(e){this.sendMessage({command:"nuevo_mensaje",from:e.from,message:e.content,chatId:e.chatId})}},{key:"addCallbacks",value:function(e,t){this.callbacks.messages_dump=e,this.callbacks.nuevo_mensaje=t}},{key:"sendMessage",value:function(e){try{this.socketRef.send(JSON.stringify(Object(O.a)({},e)))}catch(t){console.log(t.message)}}},{key:"state",value:function(){return this.socketRef.readyState}},{key:"waitForSocketConnection",value:function(e){var t=this.socketRef,a=this.waitForSocketConnection;setTimeout((function(){if(1===t.readyState)return console.log("connection is secure"),void(null!=e&&e());console.log("waiting for connection..."),a(e)}),1)}}]),e}();S.instance=null;var N=S.getInstance();var D=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={message:""},n.sendMessageHandler=function(e){e.preventDefault();var t={from:"".concat(n.props.user.username),content:n.state.message,chatId:n.props.match.params.chatID};N.newChatMessage(t),n.setState({message:""})},n.messageChangeHandler=function(e){n.setState({message:e.target.value})},n.renderMessages=function(e){var t="".concat(n.props.user.username);return e.map((function(e,a,n){return r.a.createElement("li",{key:e.id,style:{marginBottom:n.length-1===a?"300px":"15px"},className:e.author===t?"sent":"replies"},r.a.createElement("img",{src:w.a,alt:""}),r.a.createElement("p",null,r.a.createElement("small",null,e.author),r.a.createElement("br",null),e.content,r.a.createElement("br",null),r.a.createElement("small",null,(o=Math.round(((new Date).getTime()-new Date(e.timestamp))/6e4))<60?r.a.createElement("small",null,"Hace ",o," minutos"):o>=60&&o<1440?r.a.createElement("small",null,"Hace ",Math.round(o/60)," horas"):o>=1440?r.a.createElement("small",null,"Hace ",Math.round(o/1440)," d\xedas"):void 0)));var o}))},n.scrollToBottom=function(){n.messagesEnd.scrollIntoView({behavior:"smooth"})},n.initializeChat(),n}return Object(m.a)(a,[{key:"initializeChat",value:function(){var e=this;this.waitForSocketConnection((function(){N.addCallbacks(e.setMessages.bind(e),e.addMessage.bind(e)),N.fetchMessages(e.props.currentUser,e.props.match.params.chatID)})),N.connect(this.props.match.params.chatID)}}]),Object(m.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;this.props.match.params.chatID!==e.match.params.chatID&&(N.disconnect(),this.waitForSocketConnection((function(){N.fetchMessages(t.props.currentUser,t.props.match.params.chatID)})),N.connect(e.match.params.chatID))}},{key:"waitForSocketConnection",value:function(e){var t=this;setTimeout((function(){if(1===N.state())return console.log("connection is secure"),void e();console.log("waiting for connection..."),t.waitForSocketConnection(e)}),1)}},{key:"setMessages",value:function(e){this.setState({messages:e.reverse()})}},{key:"addMessage",value:function(e){this.setState({messages:[].concat(Object(l.a)(this.state.messages),[e])})}},{key:"componentDidMount",value:function(){this.scrollToBottom()}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"render",value:function(){var e,t=this,a=this.state.messages;return r.a.createElement("div",{id:"frame"},r.a.createElement(j,null),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"contact-profile"},r.a.createElement("img",{src:E.a,alt:""}),r.a.createElement("p",{id:"upper-group-name"},"lobby"===(e=this.props.match.params.chatID)?"Elija el grupo de chat en la parte izquierda...":e),r.a.createElement("div",{className:"social-media"},r.a.createElement("i",{className:"fa fa-facebook","aria-hidden":"true"}),r.a.createElement("i",{className:"fa fa-twitter","aria-hidden":"true"}),r.a.createElement("i",{className:"fa fa-instagram","aria-hidden":"true"}))),r.a.createElement("div",{className:"messages"},r.a.createElement("ul",{id:"chat-log"},a&&this.renderMessages(a),r.a.createElement("div",{style:{float:"left",clear:"both"},ref:function(e){t.messagesEnd=e}}))),r.a.createElement("div",{className:"message-input"},r.a.createElement("form",{onSubmit:this.sendMessageHandler},r.a.createElement("div",{className:"wrap"},r.a.createElement("input",{onChange:this.messageChangeHandler,value:this.state.message,required:!0,id:"chat-message-input",type:"text",placeholder:"Write your message..."}),r.a.createElement("i",{className:"fa fa-paperclip attachment","aria-hidden":"true"}),r.a.createElement("button",{id:"chat-message-submit",className:"submit"},r.a.createElement("i",{className:"fa fa-paper-plane","aria-hidden":"true"})))))))}}]),a}(r.a.Component),I=Object(s.b)((function(e){return{user:e.user}}),{})(D),U=a(19),q=a(124),R=a.n(q),z=a(15),B=a(567),W=a(547),A=a(565),F=a(546),M=a(563),L=a(540),T=a(510),G=a(562),P=a(542),H=a(129),J=a.n(H),Q=a(258);function V(){return r.a.createElement(Q.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(L.a,{color:"inherit",href:"/"},"Geosmart")," ",(new Date).getFullYear(),".")}var Y=a(541),Z=Object(Y.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://source.unsplash.com/collection/15780809)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:"#7ab648"},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2),backgroundColor:"#3a7ca4"}}})),K="loginUser",X=function(e){return{type:K,payload:{user_object:e}}},$=function(){return{type:"logoutUser",payload:{}}},ee=a(97),te=function(e){return{type:"updateUser",payload:{user_object:e}}},ae=JSON.parse(localStorage.getItem("user"));var ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case K:return console.log(t.payload.user_object),localStorage.setItem("user",JSON.stringify(t.payload.user_object)),localStorage.setItem("token",JSON.stringify(t.payload.user_object.token)),t.payload.user_object;case"updateUser":return console.log(t),localStorage.setItem("user",JSON.stringify(t.payload.user_object)),t.payload.user_object;case"logoutUser":return console.log("Log out user"),localStorage.removeItem("user"),localStorage.removeItem("token"),null;default:return e}},re=Object(ee.b)({user:ne}),oe=Object(ee.c)(re);console.log(oe.getState());var ce=oe;function se(){ce.dispatch({type:"logoutUser"})}function le(){return ie.apply(this,arguments)}function ie(){return(ie=Object(h.a)(g.a.mark((function e(){var t,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("token")){e.next=4;break}return console.log("No token on storage"),e.abrupt("return",se());case 4:return console.log("cheking token "),e.next=7,b.a.post(C,{query:"\n                query {\n                    validateToken(token: ".concat(t.trim(),") {\n                      valid\n                    }\n                  }\n                ")});case 7:if(a=e.sent,console.log(a),1!=a.data.data.validateToken.valid){e.next=12;break}return e.abrupt("return",!0);case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var me=Object(s.b)((function(e){return{}}),(function(e){return{loginUser:function(t){return e(X(t))}}}))((function(e){var t=e.loginUser,a=Object(n.useState)(""),o=Object(z.a)(a,2),c=o[0],s=o[1],l=Object(n.useState)(""),i=Object(z.a)(l,2),m=i[0],u=i[1],p=Z(),d=Object(U.g)();return r.a.createElement("div",null,r.a.createElement(P.a,{container:!0,component:"main",className:p.root},r.a.createElement(P.a,{item:!0,xs:!1,sm:4,md:7,className:p.image}),r.a.createElement(P.a,{item:!0,xs:12,sm:8,md:5,component:T.a,elevation:6,square:!0},r.a.createElement("div",{className:p.paper},r.a.createElement(B.a,{className:p.avatar},r.a.createElement(J.a,null)),r.a.createElement(Q.a,{component:"h1",variant:"h5"},"Login"),r.a.createElement("form",{className:p.form,noValidate:!0},r.a.createElement(A.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",onChange:function(e){return s(e.target.value)},autoFocus:!0}),r.a.createElement(A.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){return u(e.target.value)}}),r.a.createElement(F.a,{control:r.a.createElement(M.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(W.a,{fullWidth:!0,variant:"contained",color:"primary",className:p.submit,onClick:function(e){return e.preventDefault(),void(0===c.trim().length||0===m.trim().length?alert("All fields must be filled"):b.a.post(C,{query:'\n          mutation {\n            loginUser(user: {\n              username: "'.concat(c.trim(),'"\n              password: "').concat(m.trim(),'"\n            }) {\n              _id\n              firstname\n              lastname\n              username\n              country\n              profile_picture\n              created_at\n              flag\n              token\n            }\n          }\n        ')}).then((function(e){200===e.status?(console.log("USUARIO: "+e.data.data.loginUser),t(e.data.data.loginUser),d.push({pathname:"/games"})):alert("Ups! Something went wrong")})).catch((function(){alert("Ups! Something went wrong")})))}},"Login"),r.a.createElement(P.a,{container:!0},r.a.createElement(P.a,{item:!0,xs:!0},r.a.createElement(L.a,{href:"#",variant:"body2"},"Login as guest")),r.a.createElement(P.a,{item:!0},r.a.createElement(L.a,{href:"/signup",variant:"body2"},"Don't have an account? Sign Up"))),r.a.createElement(G.a,{mt:5},r.a.createElement(V,null)))))))})),ue=function(){var e=Object(n.useState)(""),t=Object(z.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(""),s=Object(z.a)(c,2),l=s[0],i=s[1],m=Object(n.useState)(""),u=Object(z.a)(m,2),p=u[0],d=u[1],f=Object(n.useState)(""),y=Object(z.a)(f,2),E=y[0],v=y[1],w=Object(n.useState)(""),k=Object(z.a)(w,2),x=k[0],_=k[1],j=Object(n.useState)(""),O=Object(z.a)(j,2),S=O[0],N=O[1],D=Z();function I(){return(I=Object(h.a)(g.a.mark((function e(t){var n,r,o,c,s,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),0!==a.trim().length&&0!==l.trim().length&&0!==p.trim().length&&0!==E.trim().length&&0!==x.trim().length&&0!==S.trim().length){e.next=5;break}alert("All field must be filled"),e.next=35;break;case 5:if(E.trim()===x.trim()){e.next=9;break}alert("The password and confirm password fields must be the same"),e.next=35;break;case 9:return e.prev=9,e.next=12,b.a.get("https://restcountries.eu/rest/v2/name/".concat(S));case 12:return n=e.sent,e.next=15,b.a.post(C,{query:'\n            mutation {\n              createUser(user: {\n                firstname: "'.concat(a.trim(),'"\n                lastname: "').concat(l.trim(),'"\n                username: "').concat(p.trim(),'"\n                password: "').concat(E.trim(),'"\n                country: "').concat(S.trim(),'"\n                flag: "').concat(n.data[0].flag,'"\n                profile_picture: "https://github.com/nicrodriguezval/images/blob/main/3382926.jpg?raw=true"\n              }) {\n                message\n              }\n            }\n          ')});case 15:return r=e.sent,e.next=18,b.a.post(C,{query:'\n            mutation {\n              createContact(contact: {\n                username: "'.concat(p.trim(),'",\n                firstname: "').concat(a.trim(),'",\n                lastname: "').concat(l.trim(),'",\n                friends: []}) {\n                username\n              }\n            }\n            ')});case 18:return o=e.sent,console.log("Contact "+o.data.data.createContact.username+" created "),e.next=22,b.a.post(C,{query:'\n            query{\n              getChatsByUsername(\n                username: "dummyuser"\n              ) {\n                participantes\n              }\n            }\n            '});case 22:return c=e.sent,(s=c.data.data.getChatsByUsername[0].participantes).push(o.data.data.createContact.username),e.next=27,b.a.post(C,{query:'\n          mutation{\n            updateChat(\n              id: "general",\n              chat: {id: "general",\n              participantes: '.concat(JSON.stringify(s),",\n              }){\n              id\n            }\n          }\n          ")});case 27:i=e.sent,console.log("User joined chatroom "+i.data.data.updateChat.id+" successfully "),alert(r.data.data.createUser.message),e.next=35;break;case 32:e.prev=32,e.t0=e.catch(9),console.log(e.t0);case 35:return e.abrupt("return");case 36:case"end":return e.stop()}}),e,null,[[9,32]])})))).apply(this,arguments)}return r.a.createElement("div",null,r.a.createElement(P.a,{container:!0,component:"main",className:D.root},r.a.createElement(P.a,{item:!0,xs:!1,sm:4,md:7,className:D.image}),r.a.createElement(P.a,{item:!0,xs:12,sm:8,md:5,component:T.a,elevation:6,square:!0},r.a.createElement("div",{className:D.paper},r.a.createElement(B.a,{className:D.avatar},r.a.createElement(J.a,null)),r.a.createElement(Q.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement("form",{className:D.form,noValidate:!0},r.a.createElement(P.a,{container:!0,spacing:2},r.a.createElement(A.a,{variant:"outlined",margin:"normal",autoComplete:"fname",name:"firstName",id:"firstName",label:"First Name",onChange:function(e){return o(e.target.value)},fullWidth:!0,required:!0,autoFocus:!0}),r.a.createElement(A.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"lname",onChange:function(e){return i(e.target.value)},required:!0}),r.a.createElement(A.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",onChange:function(e){return d(e.target.value)}}),r.a.createElement(P.a,{item:!0,xs:12,sm:6},r.a.createElement(A.a,{margin:"normal",autoComplete:"password",name:"password",variant:"outlined",id:"password",label:"Password",type:"password",required:!0,fullWidth:!0,onChange:function(e){return v(e.target.value)}})),r.a.createElement(P.a,{item:!0,xs:12,sm:6},r.a.createElement(A.a,{margin:"normal",variant:"outlined",id:"cpassword",label:"Confirm Password",type:"password",name:"cpassword",autoComplete:"confirm-password",required:!0,fullWidth:!0,onChange:function(e){return _(e.target.value)}})),r.a.createElement(A.a,{margin:"normal",variant:"outlined",required:!0,fullWidth:!0,id:"country",label:"Country",name:"country",autoComplete:"country",onChange:function(e){return N(e.target.value)}}),r.a.createElement(W.a,{fullWidth:!0,variant:"contained",color:"primary",className:D.submit,onClick:function(e){return function(e){return I.apply(this,arguments)}(e)}},"Sign Up"),r.a.createElement(P.a,{container:!0},r.a.createElement(P.a,{item:!0,xs:!0},r.a.createElement(L.a,{href:"/login",variant:"body2"},"Already have an account? Login")))),r.a.createElement(G.a,{mt:5},r.a.createElement(V,null)))))))},pe=a(246),de=a.n(pe),ge=a(247),he=a.n(ge),fe=Object(Y.a)((function(e){return{container:{justifyContent:"center",alignItems:"center",border:"black",background:"#3497d4"},item:{width:"100%",background:"#3F51B5",textAlign:"center",borderRadius:"5px",marginTop:"120px"},center:{cursor:"pointer",display:"center",justifyContent:"center",margin:"auto",width:"250px",float:"left"},table:{width:"100%",display:"table"},top:{display:"table-cell",position:"relative",width:"100%",height:"100px","background-color":"rgba(89,144,222,.6)","vertical-align":"middle"},submit:{margin:e.spacing(3,0,2)}}})),be=function(){var e=Object(U.g)(),t=fe();return r.a.createElement("div",{style:{height:"100vh"}},r.a.createElement(P.a,{container:!0,className:t.container},r.a.createElement("font",{color:"white",size:"80"},r.a.createElement("h1",{style:{fontFamily:"system-ui"}},"Welcome to Geosmart app.")),r.a.createElement(P.a,{item:!0,m:12,className:t.item},r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.a.createElement("div",{className:t.center},r.a.createElement("img",{src:de.a,alt:"Logo",width:"308",height:"300",onClick:function(){e.push("/login")}})),r.a.createElement("div",{className:t.center},r.a.createElement("img",{src:he.a,alt:"Logo2",width:"328",height:"320",onClick:function(){e.push("/signup")}})))),r.a.createElement(P.a,null,r.a.createElement("font",{color:"white",face:"Garamond"},r.a.createElement("h2",{style:{fontFamily:"system-ui"}},"Learn Geography by Playing!"),r.a.createElement("h2",{style:{fontFamily:"system-ui"}},"Click the color logo to login, or the black and white logo to sign up.")))))},ye=a(548),Ee=a(549),ve=a(550),we=a(551),ke=a(568),xe=a(561),Ce=a(569),_e=a(552),je=a(566),Oe=function(e){return r.a.createElement(ye.a,{style:{margin:"3em",height:"100%",width:"100%",borderRadius:"25px",boxShadow:"0px 6px 6px -3px rgba(0,0,0,0.2), 0px 10px 14px 1px rgba(0,0,0,0.14), 0px 4px 18px 3px rgba(0,0,0,0.12)"}},r.a.createElement(Ee.a,{style:{marginTop:"2em"}},r.a.createElement(ve.a,{style:{height:140,width:140,margin:"0 auto",borderRadius:"50%"},image:e.gameImage,title:"Contemplative Reptile"}),r.a.createElement(we.a,null,r.a.createElement(Q.a,{gutterBottom:!0,variant:"h5",component:"h2"},e.gameName),r.a.createElement(Q.a,{variant:"body2",color:"textSecondary",component:"p"},e.gameDescription),e.mapGame?r.a.createElement(r.a.Fragment,null,r.a.createElement(je.a,{title:"Number of game rounds"},r.a.createElement(ke.a,{style:{marginTop:"2em"}},"Number of rounds: ")),r.a.createElement(xe.a,{style:{width:"100%"},labelId:"demo-simple-select-label",id:"demo-simple-select",value:e.gameValue,onChange:e.handleFunctionContinent},r.a.createElement(Ce.a,{value:"5"},"5 rounds"),r.a.createElement(Ce.a,{value:"6"},"6 rounds"),r.a.createElement(Ce.a,{value:"7"},"7 rounds"),r.a.createElement(Ce.a,{value:"8"},"8 rounds"),r.a.createElement(Ce.a,{value:"9"},"9 rounds"),r.a.createElement(Ce.a,{value:"10"},"10 rounds"))):r.a.createElement(r.a.Fragment,null,r.a.createElement(je.a,{title:"Restrict game questions to a given continent"},r.a.createElement(ke.a,{style:{marginTop:"2em"}},"Only questions from: ")),r.a.createElement(xe.a,{style:{width:"100%"},labelId:"demo-simple-select-label",id:"demo-simple-select",value:e.gameValue,onChange:e.handleFunctionContinent},r.a.createElement(Ce.a,{value:"Global"},"All the world"),r.a.createElement(Ce.a,{value:"America"},"America"),r.a.createElement(Ce.a,{value:"Asia"},"Asia"),r.a.createElement(Ce.a,{value:"Africa"},"\xc1frica"),r.a.createElement(Ce.a,{value:"Europe"},"Europe"),r.a.createElement(Ce.a,{value:"Oceania"},"Oceania"))))),r.a.createElement(_e.a,null,r.a.createElement(W.a,{size:"small",color:"primary",style:{color:"white",backgroundColor:"#00bcd4",margin:"0.5em",marginBottom:"1em"},onClick:e.onClickConfiguration},"Play now"),r.a.createElement(W.a,{size:"small",color:"primary",style:{color:"white",backgroundColor:"#9C27B0",margin:"0.5em",marginBottom:"1em"},onClick:e.onClickLeaderboard},"Leaderboard"),r.a.createElement(W.a,{size:"small",color:"primary",style:{color:"white",backgroundColor:"#FF5722",margin:"0.5em",marginBottom:"1em"},onClick:e.onClickMyRecords},"My Records")))},Se=a(249),Ne=a.n(Se),De=a(250),Ie=a.n(De),Ue=a(251),qe=a.n(Ue),Re=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={map_rounds:"5",flag_continent:"Global",place_continent:"Global"},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){le()}},{key:"componentWillReceiveProps",value:function(e){}},{key:"componentWillUnmount",value:function(){}},{key:"handle_map_rounds",value:function(e){var t=e.target.value;this.setState({map_rounds:t})}},{key:"handle_flag_continent",value:function(e){var t=e.target.value;this.setState({flag_continent:t})}},{key:"handle_place_continent",value:function(e){var t=e.target.value;this.setState({place_continent:t})}},{key:"render",value:function(){var e=this;return this.props.user?r.a.createElement("div",{style:{width:"100%",backgroundImage:"linear-gradient(160deg, #0093E9 0%, #80D0C7 100%)",minHeight:"100vh"}},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(Oe,{gameName:"Recognize the flag",gameDescription:"Recognize to which country the indicated flag belongs",handleFunctionContinent:function(t){return e.handle_flag_continent(t)},gameImage:Ie.a,gameValue:this.state.flag_continent,onClickMyRecords:function(){return e.props.history.push({pathname:"/myrecords",gametype:"2"})},onClickLeaderboard:function(){return e.props.history.push({pathname:"/bestscores",gametype:"2"})},onClickConfiguration:function(){return e.props.history.push({pathname:"/play/flags",filter:e.state.flag_continent,gametype:"flags"})}}),r.a.createElement(Oe,{mapGame:!0,gameName:"Locate the country",gameDescription:"Locate the indicated country on our interactive map on a given series of rounds",handleFunctionContinent:function(t){return e.handle_map_rounds(t)},gameImage:Ne.a,gameValue:this.state.map_rounds,onClickMyRecords:function(){return e.props.history.push({pathname:"/myrecords",gametype:"1"})},onClickLeaderboard:function(){return e.props.history.push({pathname:"/bestscores",gametype:"1"})},onClickConfiguration:function(){return e.props.history.push({pathname:"/play/map",rounds:e.state.map_rounds})}}),r.a.createElement(Oe,{gameName:"Recognize the place",gameDescription:"Recognize to which country the indicated representative place belongs",handleFunctionContinent:function(t){return e.handle_place_continent(t)},gameImage:qe.a,gameValue:this.state.place_continent,onClickMyRecords:function(){return e.props.history.push({pathname:"/myrecords",gametype:"3"})},onClickLeaderboard:function(){return e.props.history.push({pathname:"/bestscores",gametype:"3"})},onClickConfiguration:function(){return e.props.history.push({pathname:"/play/places",filter:e.state.place_continent,gametype:"places"})}}))):r.a.createElement("div",{style:{margin:"10em",fontSize:"20px",fontWeight:600,textAlign:"center"}},"La sesi\xf3n ha expirado")}}]),a}(r.a.Component),ze=Object(s.b)((function(e){return{user:e.user}}),(function(e){return{}}))(Re),Be=a(131),We=a.n(Be),Ae=a(553),Fe=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",{style:{width:"100%",backgroundImage:"linear-gradient(315deg, #7f53ac 0%, #647dee 74%)",minHeight:"50em"}},r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(Ae.a,{variant:"indeterminate",style:{marginTop:"15em",color:"#FFEB3B"},size:200,thickness:10,value:100}),r.a.createElement("h2",{style:{fontFamily:"system-ui",color:"white"}},"Loading game...")))}}]),a}(r.a.Component),Me=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={mostrar_boton_next:!1,correct_selected:!1,score:0,current_question:0,questions:null,questionsx:[{_id:"someid",statement:"\xbfA que lugar pertenece esta bandera?",image:"https://upload.wikimedia.org/wikipedia/en/thumb/0/05/Flag_of_Brazil.svg/1200px-Flag_of_Brazil.svg.png",optionA:"Colombia",optionB:"Brasil",optionC:"Ecuador",optionD:"Per\xfa",ans:"Brasil",category:"flags",continent:"America",created_at:"somedate",Updated_at:"otherdate"},{_id:"someid",statement:"\xbfA que lugar pertenece esta bandera?",image:"https://upload.wikimedia.org/wikipedia/commons/d/df/Flag_of_Peru_%28state%29.svg",optionA:"Colombia",optionB:"Brasil",optionC:"Ecuador",optionD:"Per\xfa",ans:"Per\xfa",category:"flags",continent:"America",created_at:"somedate",Updated_at:"otherdate"},{_id:"someid",statement:"\xbfA que lugar pertenece esta bandera?",image:"https://upload.wikimedia.org/wikipedia/commons/9/9e/Flag_of_Japan.svg",optionA:"Colombia",optionB:"Brasil",optionC:"Jap\xf3n",optionD:"Per\xfa",ans:"Jap\xf3n",category:"flags",continent:"America",created_at:"somedate",Updated_at:"otherdate"}]},n}return Object(m.a)(a,[{key:"insertScore",value:function(){var e=Object(h.a)(g.a.mark((function e(t,a,n,r){var o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post(C,{query:'\n        mutation{\n            createScore(score:{\n                       ID_User: "'.concat(t,'",\n                       Score: ').concat(a,',\n                       DatePlayed: "').concat(n,'",\n                       ID_Game: "').concat(r,'"\n            }){\n                 message\n            }\n          }\n\n          ')}).catch((function(e){console.error(e)}));case 2:o=e.sent,console.log(o);case 4:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}()},{key:"getQuestions",value:function(){var e=Object(h.a)(g.a.mark((function e(){var t,a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(this.props.location.gametype),console.log(this.props.location.filter),t=this.props.location.gametype,"Global"===(a=this.props.location.filter)&&(a=""),e.next=7,b.a.post(C,{query:'\n    query {\n      gameQuestions(category: "'.concat(t,'", continent: "').concat(a,'") {\n        categoria\n        ERROR\n        preguntas{\n          _id\n          statement\n          optionA\n          optionB\n          optionC\n          optionD\n          continent\n          image\n          ans\n        }\n       }\n      }\n      ')});case 7:if(n=e.sent,console.log(n),!(n&&n.data&&n.data.data)){e.next=11;break}return e.abrupt("return",this.setState({questions:n.data.data.gameQuestions.preguntas}));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){return console.log(this.props.location),this.props.location.gametype?this.props.user?void this.getQuestions():this.props.history.push("/home"):this.props.history.push("/games")}},{key:"componentDidUpdate",value:function(e){}},{key:"componentWillUnmount",value:function(){}},{key:"chooseAnswer",value:function(e,t){var a=0,n=!1;return e.ans===t&&(a=100,n=!0),this.setState({score:this.state.score+a,mostrar_boton_next:!0,correct_selected:n})}},{key:"reiniciar",value:function(){return this.setState({score:0,current_question:0})}},{key:"nextQuestion",value:function(){if(this.state.current_question+1>=this.state.questions.length){var e=this.props.user.username,t=this.state.score+1,a=new Date;a=a.toISOString();var n="2";"places"===this.props.location.gametype&&(n="3"),console.log(a),this.insertScore(e,t,a,n)}return this.setState({current_question:this.state.current_question+1,mostrar_boton_next:!1,correct_selected:!1})}},{key:"render",value:function(){var e=this;if(null==this.state.questions||null==this.state.questions)return r.a.createElement(Fe,null);var t=this.state.questions[this.state.current_question],a={color:"white",backgroundColor:"#00bcd4",margin:"1em"};return r.a.createElement("div",{style:this.props.location.gametype&&"flags"===this.props.location.gametype?{backgroundImage:"linear-gradient(15deg, #13547a 0%, #80d0c7 100%)",width:"100%",minHeight:"50em",fontFamily:"system-ui"}:{backgroundImage:"linear-gradient(to top, #09203f 0%, #537895 100%)",width:"100%",minHeight:"50em",fontFamily:"system-ui"}},r.a.createElement("div",{style:{display:"flex",textAlign:"center",flexDirection:"column"}},"flags"===this.props.location.gametype?r.a.createElement("h2",{style:{color:"white",marginTop:"1.5em",fontWeight:600,fontSize:"3em"}},"Identify which country the flag belongs to"):r.a.createElement("h2",{style:{color:"white",marginTop:"1.5em",fontWeight:600,fontSize:"3em"}},"Identify which country the place belongs to"),r.a.createElement("h3",{className:"score"},r.a.createElement("span",{style:{color:"white"}},"Current score: "),this.state.score),this.state.current_question>=this.state.questions.length?r.a.createElement(ye.a,{style:{margin:"0 auto"},elevation:10},r.a.createElement(Ee.a,{style:{marginTop:"2em",minWidth:"45em"}},r.a.createElement(ve.a,{style:{height:140,width:140,margin:"0 auto",borderRadius:"50%"},image:We.a}),r.a.createElement(we.a,null,r.a.createElement(Q.a,{gutterBottom:!0,variant:"h5",component:"h2"},"The game is over. your score is: ",this.state.score),r.a.createElement(Q.a,{variant:"body2",color:"textSecondary",component:"p"}))),r.a.createElement(_e.a,null,r.a.createElement("div",{style:{textAlign:"center",margin:"0 auto"}},r.a.createElement(W.a,{size:"small",color:"primary",onClick:function(){return e.props.history.push("/games")}},"Back to main menu"),r.a.createElement(W.a,{size:"small",color:"primary",onClick:function(){return e.reiniciar()}},"Play again")))):null,t?r.a.createElement(ye.a,{style:{margin:"0 auto"},elevation:10},r.a.createElement(Ee.a,{style:{marginTop:"2em",minWidth:"45em"}},r.a.createElement(ve.a,{style:{height:140,width:200,margin:"0 auto"},image:t.image,title:"Contemplative Reptile"}),r.a.createElement(we.a,null,r.a.createElement(Q.a,{gutterBottom:!0,variant:"h5",component:"h2"},"Question ",this.state.current_question),!0===this.state.mostrar_boton_next?r.a.createElement(Q.a,{variant:"body2",color:"textSecondary",component:"p",style:{fontSize:"18px"}},!0===this.state.correct_selected?r.a.createElement("span",{style:{color:"#07d607",fontWeight:600}},"Correct! + ",100):r.a.createElement("span",{style:{color:"red",fontWeight:600}},"Incorrect!")):r.a.createElement(Q.a,{variant:"body2",color:"textSecondary",component:"p"},t.statement))),r.a.createElement(_e.a,null,!0===this.state.mostrar_boton_next?r.a.createElement("div",{style:{textAlign:"center",margin:"0 auto"}},r.a.createElement(W.a,{size:"small",color:"primary",style:a,onClick:function(){return e.nextQuestion()}},"Next question")):r.a.createElement("div",{style:{textAlign:"center",margin:"0 auto"}},r.a.createElement(W.a,{size:"small",color:"primary",style:a,onClick:function(){return e.chooseAnswer(t,t.optionA)}},t.optionA),r.a.createElement(W.a,{size:"small",color:"primary",style:a,onClick:function(){return e.chooseAnswer(t,t.optionB)}},t.optionB),r.a.createElement(W.a,{size:"small",color:"primary",style:a,onClick:function(){return e.chooseAnswer(t,t.optionC)}},t.optionC),r.a.createElement(W.a,{size:"small",color:"primary",style:a,onClick:function(){return e.chooseAnswer(t,t.optionD)}},t.optionD)))):null,this.props.location.filter&&"global"!==this.props.location.filter?r.a.createElement("h3",{style:{color:"white",fontWeight:600,fontSize:"2em"}},"Only questions from: ",this.props.location.filter):null))}}]),a}(r.a.Component),Le=Object(s.b)((function(e){return{user:e.user}}),(function(e){return{}}))(Me),Te=Object(Y.a)((function(e){return{root:{height:"100vh",width:"100%",overflow:"hidden",backgroundImage:"linear-gradient(160deg, #0093E9 0%, #80D0C7 100%)"},paper:{display:"flex",margin:100,width:"100%",height:500},profile_image:{width:"100%",height:"100%"},subtitle:{display:"flex",flexDirection:"row",marginTop:"2em"},content:{display:"flex",flexDirection:"row"}}})),Ge=Object(s.b)((function(e){return{user:e.user}}),{})((function(e){var t=e.user,a=Te(),n=Object(U.g)();return r.a.createElement("div",{className:a.root},r.a.createElement(P.a,{container:!0,direction:"row",spacing:2},r.a.createElement(ye.a,{className:a.paper},r.a.createElement(P.a,{item:!0,xs:3},r.a.createElement(ve.a,{className:a.profile_image,image:t.profile_picture,title:"Profile picture"})),r.a.createElement(P.a,{item:!0,xs:9},r.a.createElement(P.a,{direction:"row",spacing:2},r.a.createElement(we.a,{style:{marginLeft:"3em"}},r.a.createElement("div",{style:{display:"flex",flexDirection:"row",marginTop:"2em"}},r.a.createElement(P.a,{item:!0,xs:6},r.a.createElement(Q.a,{variant:"subtitle1",color:"textSecondary",component:"p"},"Username"))),r.a.createElement("div",{className:a.content},r.a.createElement(P.a,{item:!0,xs:6},r.a.createElement(Q.a,{variant:"subtitle1"},t.username))),r.a.createElement("div",{className:a.subtitle},r.a.createElement(P.a,{item:!0,xs:6},r.a.createElement(Q.a,{variant:"subtitle1",color:"textSecondary",component:"p"},"Full name")),r.a.createElement(P.a,{item:!0,xs:6},r.a.createElement(Q.a,{variant:"subtitle1",color:"textSecondary",component:"p"},"Created at"))),r.a.createElement("div",{className:a.content},r.a.createElement(P.a,{item:!0,xs:6},r.a.createElement(Q.a,{variant:"subtitle1"},t.firstname+" "+t.lastname)),r.a.createElement(P.a,{item:!0,xs:6},r.a.createElement(Q.a,{variant:"subtitle1"},t.created_at.slice(0,t.created_at.indexOf("T"))))),r.a.createElement("div",{className:a.subtitle},r.a.createElement(P.a,{item:!0,xs:6},r.a.createElement(Q.a,{variant:"subtitle1",color:"textSecondary",component:"p"},"Country"))),r.a.createElement("div",{className:a.content},r.a.createElement(P.a,{item:!0,xs:6},r.a.createElement(Q.a,{variant:"subtitle1"},t.country),r.a.createElement("img",{src:t.flag,alt:"Logo",height:"7%"}),r.a.createElement(P.a,{imem:!0,xs:3,style:{marginTop:"5em"}},r.a.createElement(W.a,{fullWidth:!0,variant:"contained",color:"primary",className:a.submit,onClick:function(){return n.push({pathname:"/update-user"})}},"update"))))))))))})),Pe=a(252),He=a.n(Pe),Je=a(554),Qe=a(543),Ve=a(253),Ye=a.n(Ve),Ze=Object(s.b)((function(e){return{user:e.user}}),(function(e){return{updateUser:function(t){return e(te(t))}}}))((function(e){var t=e.user,a=e.updateUser,o=Object(n.useState)(""),c=Object(z.a)(o,2),s=c[0],l=c[1],i=Object(n.useState)(""),m=Object(z.a)(i,2),u=m[0],p=m[1],d=Object(n.useState)(""),f=Object(z.a)(d,2),y=f[0],E=f[1],v=Object(n.useState)(""),w=Object(z.a)(v,2),k=w[0],x=w[1],_=Object(n.useState)(""),j=Object(z.a)(_,2),O=j[0],S=j[1],N=Object(n.useState)(""),D=Object(z.a)(N,2),I=D[0],U=D[1],q=Object(n.useState)(""),F=Object(z.a)(q,2),M=F[0],L=F[1],T=Object(n.useState)(0),P=Object(z.a)(T,2),H=P[0],J=P[1],Y=Object(n.useState)(""),K=Object(z.a)(Y,2),X=K[0],$=K[1],ee=Z();function te(){return(te=Object(h.a)(g.a.mark((function e(n){var r,o,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),0!==k.trim().length){e.next=5;break}alert("You must fill the current password field"),e.next=36;break;case 5:if(k.trim()!==O.trim()){e.next=9;break}alert("New password and current password are the same"),e.next=36;break;case 9:if(0!==s.trim().length||0!==u.trim().length||0!==y.trim().length||0!==O.trim().length||0!==I.trim().length||0!==M.length){e.next=13;break}alert("you need to have at least one field filled in addition to the password"),e.next=36;break;case 13:if(e.prev=13,r="",!(I.trim().length>0)){e.next=20;break}return e.next=18,b.a.get("https://restcountries.eu/rest/v2/name/".concat(I));case 18:r=(r=e.sent).data[0].flag;case 20:return e.next=22,le();case 22:if(o=e.sent,console.log(o),0!=o){e.next=26;break}return e.abrupt("return");case 26:return e.next=28,b.a.post(C,{query:'\n            mutation {\n              updateUser(id: "'.concat(t._id,'", user: {\n                firstname: "').concat(s.trim(),'"\n                lastname: "').concat(u.trim(),'"\n                username: "').concat(y.trim(),'"\n                password: "').concat(k.trim(),'"\n                new_password: "').concat(O.trim(),'"\n                country: "').concat(I.trim(),'"\n                profile_picture: "').concat(M,'"\n                flag: "').concat(r,'"\n              }) {\n                _id\n                firstname\n                lastname\n                username\n                country\n                profile_picture\n                created_at\n                flag\n              }\n            }\n          ')});case 28:200===(c=e.sent).status&&(console.log(c),a(c.data.data.updateUser),alert("User updated")),e.next=36;break;case 32:e.prev=32,e.t0=e.catch(13),console.log(e.t0),alert("Ups! some went wrong");case 36:return e.abrupt("return");case 37:case"end":return e.stop()}}),e,null,[[13,32]])})))).apply(this,arguments)}return r.a.createElement("div",null,r.a.createElement(Je.a,{component:"main",maxWidth:"sm"},r.a.createElement("div",{className:ee.paper},r.a.createElement(B.a,{className:ee.avatar},r.a.createElement(He.a,null)),r.a.createElement(Q.a,{component:"h1",variant:"h5"},"Update Profile"),r.a.createElement("form",{className:ee.form,noValidate:!0},r.a.createElement(A.a,{variant:"outlined",margin:"normal",type:"text",name:"firstname",label:"New Firstname",id:"email",autoComplete:"firstname",onChange:function(e){return l(e.target.value)},fullWidth:!0,autoFocus:!0}),r.a.createElement(A.a,{variant:"outlined",margin:"normal",type:"text",name:"lastname",label:"New Lastname",id:"lastname",autoComplete:"lastname",onChange:function(e){return p(e.target.value)},fullWidth:!0}),r.a.createElement(A.a,{variant:"outlined",margin:"normal",type:"text",name:"username",label:"New Username",id:"username",autoComplete:"username",onChange:function(e){return E(e.target.value)},fullWidth:!0}),r.a.createElement(A.a,{variant:"outlined",margin:"normal",type:"text",name:"country",label:"New Country",id:"country",autoComplete:"country",onChange:function(e){return U(e.target.value)},fullWidth:!0}),r.a.createElement(A.a,{variant:"outlined",margin:"normal",type:"password",name:"npassword",label:"New Password",id:"npassword",autoComplete:"new-password",onChange:function(e){return S(e.target.value)},fullWidth:!0}),r.a.createElement(A.a,{variant:"outlined",margin:"normal",type:"password",name:"password",label:"Current Password",id:"password",autoComplete:"new-password",onChange:function(e){return x(e.target.value)},fullWidth:!0,required:!0}),r.a.createElement("div",{style:{marginTop:"1em",display:"flex",flexDirection:"row"}},r.a.createElement("label",{htmlFor:"upload-photo"},r.a.createElement(Qe.a,{style:{display:"none"},id:"upload-photo",name:"upload-photo",type:"file",onChange:function(e){return function(e){var a=e.target.files[0];$(a.name);var n=R.a.storage().ref("/profile_picture/".concat(t.username)).put(a);n.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;J(t)}),(function(e){console.log(e.message)}),(function(){n.snapshot.ref.getDownloadURL().then((function(e){console.log(e),L(e),J(100)}))}))}(e)}}),r.a.createElement(W.a,{color:"primary",variant:"contained",component:"span",style:{backgroundColor:"#3a7ca4",marginRight:"1.5em"}},r.a.createElement(Ye.a,{style:{marginRight:"2px"}})," Upload photo")),r.a.createElement("progress",{value:H,max:"100",style:{width:"60%",marginTop:".7em"}})),r.a.createElement(Q.a,{color:"textSecondary",variant:"subtitle1",style:{marginTop:"0.5em"}},X),r.a.createElement(W.a,{fullWidth:!0,variant:"contained",color:"primary",className:ee.submit,onClick:function(e){return function(e){return te.apply(this,arguments)}(e)}},"Update"))),r.a.createElement(G.a,{mt:8,style:{marginBottom:"2em"}},r.a.createElement(V,null))))})),Ke=a(133),Xe=["https://www.google.com/intl/en_us/mapfiles/ms/micons/blue-dot.png","https://www.google.com/intl/en_us/mapfiles/ms/micons/red-dot.png","https://www.google.com/intl/en_us/mapfiles/ms/micons/green-dot.png","https://www.google.com/intl/en_us/mapfiles/ms/micons/purple-dot.png","https://www.google.com/intl/en_us/mapfiles/ms/micons/pink-dot.png","https://www.google.com/intl/en_us/mapfiles/ms/micons/orange-dot.png","https://www.google.com/intl/en_us/mapfiles/ms/micons/yellow-dot.png"],$e={featureType:"all",elementType:"labels",stylers:[{visibility:"off"}]},et=Object(Ke.withGoogleMap)((function(e){var t=e.options.map((function(t,a){var n=Math.floor(Math.random()*Xe.length);return r.a.createElement(Ke.Marker,{key:"opt"+a,icon:{url:Xe[n]},title:"option "+a,name:"option "+a,position:{lat:t.latitude,lng:t.longitude},draggable:!1,onClick:function(a){e.choose(t)}})}));return r.a.createElement(Ke.GoogleMap,{defaultCenter:e.center,defaultZoom:2,defaultOptions:{zoomControl:!1,styles:[$e]}},t)})),tt=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={mostrar_boton_next:!1,correct_selected:!1,gameLength:5,score:0,current_question:0,questions:null},n}return Object(m.a)(a,[{key:"getQuestions",value:function(){var e=Object(h.a)(g.a.mark((function e(){var t,a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le();case 2:if(t=e.sent,console.log(t),0!=t){e.next=6;break}return e.abrupt("return");case 6:return a=1+Math.floor(7*Math.random()),e.next=9,b.a.post(C,{query:"\n      query {\n        countriesByContinent(id_continent: ".concat(a,") {\n          name\n          latitude\n          longitude\n          }\n        }\n        ")});case 9:if(n=e.sent,console.log(n),!(n&&n.data&&n.data.data)){e.next=13;break}return e.abrupt("return",this.setState({questions:n.data.data.countriesByContinent}));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"insertScore",value:function(){var e=Object(h.a)(g.a.mark((function e(t,a,n,r){var o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("insert score on map game. score: "+a),e.next=3,b.a.post(C,{query:'\n        mutation{\n            createScore(score:{\n                       ID_User: "'.concat(t,'",\n                       Score: ').concat(a,',\n                       DatePlayed: "').concat(n,'",\n                       ID_Game: "').concat(r,'"\n            }){\n                 message\n            }\n          }\n\n          ')}).catch((function(e){console.error(e)}));case 3:o=e.sent,console.log(o);case 5:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){if(this.getQuestions(),!this.props.user)return this.props.history.push("/home");this.props.location.rounds&&this.setState({gameLength:this.props.location.rounds})}},{key:"chooseAnswer",value:function(e,t){console.log(t);var a=0,n=!1;if(e.latitude===t.latitude&&e.longitude===t.longitude&&(a=100,n=!0),this.state.current_question+1>=this.state.gameLength){var r=this.props.user.username,o=this.state.score+a+1,c=new Date;c=c.toISOString();this.insertScore(r,o,c,"1")}return this.getQuestions(),this.setState({score:this.state.score+a,mostrar_boton_next:!0,correct_selected:n})}},{key:"nextQuestion",value:function(){return this.setState({current_question:this.state.current_question+1,mostrar_boton_next:!1,correct_selected:!1})}},{key:"reiniciar",value:function(){return this.setState({score:0,current_question:0})}},{key:"render",value:function(){var e=this,t=null,a=this.state.questions;a&&(t=Math.floor(Math.random()*this.state.questions.length));return r.a.createElement("div",{className:"map_container"},r.a.createElement("div",{className:"map_flexcontainer"},r.a.createElement("h2",{style:{color:"white",fontWeight:600,fontSize:"3em",maxWidth:"25em",margin:"0 auto",marginTop:"1.5em"}},"Identify the location on the map by choosing the correct marker"),r.a.createElement("h3",{className:"score"},r.a.createElement("span",{style:{color:"white"}},"Current score: "),this.state.score),this.state.current_question>=this.state.gameLength?r.a.createElement(ye.a,{style:{margin:"0 auto"},elevation:10},r.a.createElement(Ee.a,{style:{marginTop:"2em",minWidth:"45em"}},r.a.createElement(ve.a,{style:{height:140,width:140,margin:"0 auto",borderRadius:"50%"},image:We.a}),r.a.createElement(we.a,null,r.a.createElement(Q.a,{gutterBottom:!0,variant:"h5",component:"h2"},"The game is over. your score is: ",this.state.score),r.a.createElement(Q.a,{variant:"body2",color:"textSecondary",component:"p"}))),r.a.createElement(_e.a,null,r.a.createElement("div",{style:{textAlign:"center",margin:"0 auto"}},r.a.createElement(W.a,{size:"small",color:"primary",onClick:function(){return e.props.history.push("/games")}},"Back to main menu"),r.a.createElement(W.a,{size:"small",color:"primary",onClick:function(){return e.reiniciar()}},"Play again")))):null,this.state.mostrar_boton_next?r.a.createElement(ye.a,{style:{margin:"0 auto",width:"20em",padding:"2em",borderRadius:"12px",marginTop:"8em",boxShadow:"0px 6px 6px -3px rgba(0,0,0,0.2), 0px 10px 14px 1px rgba(0,0,0,0.14), 0px 4px 18px 3px rgba(0,0,0,0.12)"}},r.a.createElement("div",{style:{textAlign:"center",margin:"0 auto",display:"flex",flexDirection:"column"}},!0===this.state.correct_selected?r.a.createElement("span",{className:"mapGameCorrect"},"Correct! + ",100):r.a.createElement("span",{className:"mapGameIncorrect"},"Incorrect!"),r.a.createElement(W.a,{size:"small",color:"primary",style:{color:"white",backgroundColor:"#9C27B0",margin:"1em",padding:"0.7em",boxShadow:"0px 6px 6px -3px rgba(0,0,0,0.2), 0px 10px 14px 1px rgba(0,0,0,0.14), 0px 4px 18px 3px rgba(0,0,0,0.12)"},onClick:function(){return e.nextQuestion()}},"Next question"))):null,a&&!0!==this.state.mostrar_boton_next&&this.state.current_question<this.state.gameLength?r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{style:{color:"#FFEB3B"}},"Locate "+this.state.questions[t].name+" in the map"),r.a.createElement(et,{center:{lat:4.60971,lng:-74.08175},containerElement:r.a.createElement("div",{style:{height:"100%",width:"100%",overflow:"hidden",margin:"0 auto"}}),mapElement:r.a.createElement("div",{className:"map_element"}),options:a,choose:function(n){return e.chooseAnswer(a[t],n)}})):null))}}]),a}(r.a.Component),at=Object(s.b)((function(e){return{user:e.user}}),(function(e){return{}}))(tt),nt={marginLeft:"0.6em",marginRight:"1em",color:"#dfdada",textDecoration:"none",marginTop:"0.8em",fontWeight:600,fontSize:"26px",cursor:"pointer"},rt={marginLeft:"auto",marginRight:"1em",color:"#dfdada",textDecoration:"none",marginTop:"0.8em",fontWeight:600,fontSize:"26px",cursor:"pointer"},ot=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){console.log("Usuario "+JSON.stringify(this.props.user))}},{key:"logOut",value:function(){this.props.logoutUser()}},{key:"render",value:function(){var e=this;return null==this.props.user?r.a.createElement("div",{style:{width:"100%",backgroundColor:"#192023",minHeight:"5em",fontFamily:"system-ui"}},r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},r.a.createElement(k.b,{style:nt,to:"/home"},"Home"),r.a.createElement(k.b,{style:rt,to:"/login"},"Login"),r.a.createElement(k.b,{style:nt,to:"/signup"},"Sign up"))):r.a.createElement("div",{style:{width:"100%",backgroundColor:"#192023",minHeight:"5em",fontFamily:"system-ui"}},r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},r.a.createElement(k.b,{className:"navbtn",to:"/games"},"Games"),r.a.createElement(k.b,{className:"navbtn",to:"/profile"},"Profile"),r.a.createElement(k.b,{className:"navbtn",to:"/update-user"},"Update info"),r.a.createElement(k.b,{className:"navbtn",to:"/chat/lobby",replace:!0},"Chat"),r.a.createElement(k.b,{className:"navbtn",to:"/courses",replace:!0},"Learntic courses"),r.a.createElement(k.b,{style:{marginLeft:"auto",marginRight:"1em",color:"#e91e63",textDecoration:"none",marginTop:"0.8em",fontWeight:600,fontSize:"26px",cursor:"pointer"},onClick:function(){return e.logOut()},to:"/home"},"Log out")))}}]),a}(r.a.Component),ct=Object(s.b)((function(e){return{user:e.user}}),(function(e){return{logoutUser:function(){return e($())}}}))(ot),st=a(5),lt=a(558),it=a(560),mt=a(555),ut=a(557),pt=a(559),dt=a(556),gt=Object(st.a)((function(e){return{head:{backgroundColor:e.palette.common.black,color:e.palette.common.white},body:{fontSize:14}}}))(mt.a),ht=Object(st.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.action.hover}}}}))(dt.a),ft=Object(Y.a)({table:{minWidth:700}}),bt=Object(s.b)((function(e){return{user:e.user}}),{})((function(e){var t=ft(),a=Object(n.useState)(0),o=Object(z.a)(a,2),c=o[0],s=o[1];function l(){return(l=Object(h.a)(g.a.mark((function t(){var a,n,r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=1,e.location.gametype&&(a=e.location.gametype),t.prev=2,t.next=5,le();case 5:if(n=t.sent,console.log(n),0!=n){t.next=9;break}return t.abrupt("return");case 9:return t.next=11,b.a.post(C,{query:'\n         query{\n           bestScoreByGame(ID_Game: "'.concat(a,'"){\n             ID\n             ID_User\n             Score\n             DatePlayed\n             ID_Game\n           }\n         }\n\n       ')});case 11:if(r=t.sent,console.log(r),200!==r.status){t.next=17;break}return t.abrupt("return",s(r.data.data.bestScoreByGame));case 17:alert("Ups! Something went wrong");case 18:t.next=23;break;case 20:t.prev=20,t.t0=t.catch(2),console.error(t.t0);case 23:case"end":return t.stop()}}),t,null,[[2,20]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){!function(){l.apply(this,arguments)}(),console.log(c)}),[]),r.a.createElement(ut.a,{component:T.a},r.a.createElement(lt.a,{className:t.table,"aria-label":"customized table"},r.a.createElement(pt.a,null,r.a.createElement(dt.a,null,r.a.createElement(gt,null,"ID"),r.a.createElement(gt,null,"Username"),r.a.createElement(gt,{align:"right"},"Score"),r.a.createElement(gt,{align:"right"},"Date"),r.a.createElement(gt,{align:"right"},"Game"))),r.a.createElement(it.a,null,c?c.map((function(e){return r.a.createElement(ht,{key:e.ID},r.a.createElement(gt,{component:"th",scope:"row"},e.ID),r.a.createElement(gt,{align:"right"},e.ID_User),r.a.createElement(gt,{align:"right"},e.Score-1),r.a.createElement(gt,{align:"right"},e.DatePlayed),"1"===e.ID_Game?r.a.createElement(gt,{align:"right"},"Recognize the location"):null,"2"===e.ID_Game?r.a.createElement(gt,{align:"right"},"Recognize the flag"):null,"3"===e.ID_Game?r.a.createElement(gt,{align:"right"},"Recognize the place"):null)})):null)))})),yt=Object(st.a)((function(e){return{head:{backgroundColor:e.palette.common.black,color:e.palette.common.white},body:{fontSize:14}}}))(mt.a),Et=Object(st.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.action.hover}}}}))(dt.a),vt=Object(Y.a)({table:{minWidth:700}}),wt=Object(s.b)((function(e){return{user:e.user}}),{})((function(e){var t=vt(),a=Object(n.useState)(0),o=Object(z.a)(a,2),c=o[0],s=o[1];function l(){return(l=Object(h.a)(g.a.mark((function t(){var a,n,r,o;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=1,e.location.gametype&&(a=e.location.gametype),n=e.user.username,t.prev=3,t.next=6,le();case 6:if(r=t.sent,console.log(r),0!=r){t.next=10;break}return t.abrupt("return");case 10:return t.next=12,b.a.post(C,{query:'\n        query{\n            bestScoreByUserandGame(ID_User: "'.concat(n,'", ID_Game: "').concat(a,'"){\n               ID\n               ID_User\n               Score\n               DatePlayed\n               ID_Game\n\n            }\n          }\n\n\n       ')});case 12:if(o=t.sent,console.log(o),200!==o.status){t.next=18;break}return t.abrupt("return",s(o.data.data.bestScoreByUserandGame));case 18:alert("Ups! Something went wrong");case 19:t.next=24;break;case 21:t.prev=21,t.t0=t.catch(3),console.error(t.t0);case 24:case"end":return t.stop()}}),t,null,[[3,21]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){!function(){l.apply(this,arguments)}(),console.log(c)}),[]),r.a.createElement(ut.a,{component:T.a},r.a.createElement(lt.a,{className:t.table,"aria-label":"customized table"},r.a.createElement(pt.a,null,r.a.createElement(dt.a,null,r.a.createElement(yt,null,"ID"),r.a.createElement(yt,null,"Username"),r.a.createElement(yt,{align:"right"},"Score"),r.a.createElement(yt,{align:"right"},"Date"),r.a.createElement(yt,{align:"right"},"Game"))),r.a.createElement(it.a,null,c?c.map((function(e){return r.a.createElement(Et,{key:e.ID},r.a.createElement(yt,{component:"th",scope:"row"},e.ID),r.a.createElement(yt,{align:"right"},e.ID_User),r.a.createElement(yt,{align:"right"},e.Score-1),r.a.createElement(yt,{align:"right"},e.DatePlayed),"1"==e.ID_Game?r.a.createElement(yt,{align:"right"},"Recognize the location"):null,"2"==e.ID_Game?r.a.createElement(yt,{align:"right"},"Recognize the flag"):null,"3"==e.ID_Game?r.a.createElement(yt,{align:"right"},"Recognize the place"):null)})):null)))})),kt=a(255),xt=a.n(kt),Ct="http://54.198.239.79:3001/interface/all-courses",_t=Object(st.a)((function(e){return{head:{backgroundColor:e.palette.common.black,color:e.palette.common.white},body:{fontSize:14},table:{minWidth:650}}}))(mt.a),jt=Object(st.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.action.hover}}}}))(dt.a),Ot=Object(Y.a)({root:{width:"100%"},container:{maxHeight:440,marginTop:"20px"}}),St=Object(s.b)((function(e){return{user:e.user}}),{})((function(e){var t=Ot(),a=Object(n.useState)(0),o=Object(z.a)(a,2),c=o[0],s=o[1];function l(){return(l=Object(h.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,le();case 3:if(!1!==e.sent){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,b.a.get(Ct);case 8:if(t=e.sent,console.log(t.data.data[0].split(", ")),200!==t.status){e.next=14;break}return e.abrupt("return",s(t.data.data[0].split(", ")));case 14:alert("Ups! Something went wrong");case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.error(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})))).apply(this,arguments)}Object(n.useEffect)((function(){!function(){l.apply(this,arguments)}(),console.log(c)}),[]);var i=1;return r.a.createElement("div",{className:t.root},r.a.createElement("div",null,r.a.createElement(Q.a,{variant:"h3",style:{display:"flex",justifyContent:"center",padding:15}},r.a.createElement("img",{src:xt.a,alt:"LearnticLogo",width:"100",height:"100"}),r.a.createElement("div",{style:{marginTop:"1em"}},"Courses"))),r.a.createElement(lt.a,null,r.a.createElement(pt.a,null,r.a.createElement(dt.a,null,r.a.createElement(_t,{aling:"center"},"ID"),r.a.createElement(_t,{align:"left"},"Course"))),r.a.createElement(it.a,null,c?c.map((function(e){return r.a.createElement(jt,{key:i},r.a.createElement(_t,{component:"th",scope:"row"},i++),r.a.createElement(_t,{align:"left"},e))})):null)))}));R.a.initializeApp({apiKey:"AIzaSyCUVk6-gHqGlZyiFoPIc_32QuIymP8O82c",authDomain:"geosmart-4830e.firebaseapp.com",databaseURL:"https://geosmart-4830e.firebaseio.com",projectId:"geosmart-4830e",storageBucket:"geosmart-4830e.appspot.com",messagingSenderId:"715331075251",appId:"1:715331075251:web:1cc463262287da9c49c4c6",measurementId:"G-T3PHV83EH2"});var Nt=function(e){return null!==localStorage.getItem("user")?r.a.createElement(U.b,e):r.a.createElement(U.a,{to:"/login"})},Dt=r.a.createElement(s.a,{store:ce},r.a.createElement(k.a,null,r.a.createElement(ct,null),r.a.createElement(U.d,null,r.a.createElement(U.b,{path:"/home",component:be}),r.a.createElement(U.b,{path:"/signup",component:ue}),r.a.createElement(U.b,{path:"/login",component:me}),r.a.createElement(Nt,{path:"/chat/:chatID/",component:I}),r.a.createElement(Nt,{path:"/games",component:ze}),r.a.createElement(Nt,{path:"/play/map",component:at}),r.a.createElement(Nt,{path:"/play/flags",component:Le}),r.a.createElement(Nt,{path:"/play/places",component:Le}),r.a.createElement(Nt,{path:"/bestscores",component:bt}),r.a.createElement(Nt,{path:"/profile",component:Ge}),r.a.createElement(Nt,{path:"/update-user",component:Ze}),r.a.createElement(Nt,{path:"/myrecords",component:wt}),r.a.createElement(Nt,{path:"/courses",component:St}),r.a.createElement(U.a,{from:"/",to:"home"}))));c.a.render(Dt,document.getElementById("root"))}},[[275,1,2]]]);
//# sourceMappingURL=main.2f908eff.chunk.js.map